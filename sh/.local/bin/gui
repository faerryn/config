#!/bin/sh
protocol="${1}"
shift
export XCURSOR_SIZE=24
export XDG_TERMINAL=st
export _JAVA_AWT_WM_NONREPARENTING=1
case "${protocol}" in
	x11)
		export MOZ_X11_EGL=1
		export XAUTHORITY="${XDG_RUNTIME_DIR}"/Xauthority
		exec xinit $(which dbus-run-session) "${@}"
		;;
	wayland)
		export MOZ_ENABLE_WAYLAND=
		export QT_QPA_PLATFORM=wayland-egl
		export SDL_VIDEODRIVER=wayland
		export XKB_DEFAULT_OPTIONS="caps:escape"
		exec $(which dbus-run-session) "${@}"
		;;
	*)
		return 1
		;;
esac
