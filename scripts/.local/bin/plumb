#!/bin/sh

set -euf
EDITOR="${EDITOR:-nvim}"

case "$(file -bL --mime-type "${1}")" in
	audio/* | video/*)
		PROGRAM=mpv
		;;
	image/*)
		PROGRAM=sxiv
		;;
	text/*)
		PROGRAM="${EDITOR}"
		;;

	inode/directory)
		PROGRAM=thunar
		;;
	inode/x-empty)
		PROGRAM="${EDITOR}"
		;;

	application/json)
		PROGRAM="${EDITOR}"
		;;
	application/pdf)
		PROGRAM=katarakt
		;;
	application/x-shockwave-flash)
		PROGRAM=ruffle
		;;

	*)
		return 1
		;;
esac

exec run ${PROGRAM} "${@}"
