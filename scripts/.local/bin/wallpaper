#!/bin/sh

set -euf
WALLPAPER="${XDG_CONFIG_HOME}"/wallpaper

case "${#}" in
	0)
		;;
	1)
		ln -srf "${1}" "${WALLPAPER}"
		;;
	*)
		# TODO: something with sxiv??
		return 1
		;;
esac

if [ -n "${WAYLAND_DISPLAY:-}" ]; then
	swaybg -i "${WALLPAPER}" -m fill || exec swaybg -c 282828
elif [ -n "${DISPLAY:-}" ]; then
	hsetroot -cover "${WALLPAPER}" || exec hsetroot -solid '#282828'
else
	return 1
fi
